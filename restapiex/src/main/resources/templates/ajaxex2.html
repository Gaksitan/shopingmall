<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
</head>
<body>
<p id="hi" th:text="${greet}"></p><button id="hiBtn">인사말 바꾸기</button>
<h1>Ajax Ex</h1>
<form id="myForm">
	<input type="text" name="username" placeholder="아이디"> 
	<input type="password" name="password" placeholder="비밀번호">
	<button type="submit">Submit</button>
</form>
<button id="btn">JSON 데이터 전송</button>
<div id="result"></div>
<div><button id="hideBtn" name="hide" >hide</button><button id="showBtn" name="show" >show</button></div>
<script>

<!-- JQuery 
	$(document).ready(function(){
		$('#myForm').on('submit', function(e){
			e.preventDefault(); // 폼의 기본 제출을 방지
			
			// 폼 데이터를 객체로 직렬화
			var formData = $(this).serialize();
			
			$.ajax({
				url : '/submitForm2', // 서버의 엔드포인트 URL
				type : 'POST', // 요청 방식
				data : formData, // 전송할 데이터
				success : function(response){
					console.log('Success:', response);
					// $('#result').text(response);
					$('#result').text(response.username + ", " + response.password);
				},
				error : function(xhr, status, error){
					console.log('XMLHttpRequest 객체 : ', xhr);
					console.log('Status:', status);
					console.log('Error:', error);
					
					if(xhr.status === 404){
						console.log("리소스가 없어요~~(주소를 똑바로 쓰란 말이죵~)");
					}else if(xhr.status === 500){
						console.log("아 이선수 문제가 있어요~~ 메세지를 확인하세요.");
					}else{
						console.log("다른 알려지지 않은 문제가 있는 것 같군효오오.");
					}
				}
			});
		});
		
		$('#btn').on('click', function(e){
			const jsonData = {
					username : "testUser",
					password : "1234"
			}
			$.ajax({
				url: "/submitJson2", // 서버의 엔드포인트(서버의 목적지) URL
				type: "POST", // Http 메소드 타입
				contentType: "application/json", // 전송할 데이터의 형식 - 여기서 json
				data: JSON.stringify(jsonData), // 전송할 데이터
				success: function(response){
					console.log(response);
					// $("#result").text(response);
					$("#result").text(response.username + ", " + response.password);
				}, // 성공적으로 완료되었을 때 서버가 보내온 메시지
				error: function(){
					console.log("실패했어요.");
				}// 실패했을 때 실행될 코드
			})
		})
		
		$('#hideBtn').click(function(){
			$("#result").hide();
		})
		$("#showBtn").click(function(){
			$("#result").show();
		})
		
		const randomNum = Math.floor(Math.random() * 5);
		const array = ["Hi", "안녕", "니하오", "오하요", "사와디캅"];
		$("#hiBtn").click(function(){
			
			$.ajax({
				url : "/hello2",
				type : "POST",
				contentType : "application/json",
				data : JSON.stringify(sendData),
				success : function(response){
					console.log(response);
					$("#hi").text(response);
				},
				error : function(){
					console.log("실패했어유~");
				}
			});
			
		});
		
		$('#hi').text(array[randomNum]);
		// Json 데이터 서버에 보내고 응답받기
	})
-->
</script>
</body>
</html>